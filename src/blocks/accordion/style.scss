/**
 * Gambol Accordion Block Styles
 *
 * @package GambolBuilder
 */

// =============================================
// ACCORDION CONTAINER
// =============================================

.gambol-accordion {
	display: flex;
	flex-direction: column;
	gap: var(--gambol-accordion-gap, 8px);
}

// =============================================
// ACCORDION ITEM
// =============================================

.gambol-accordion-item {
	border: var(--gambol-accordion-border, 1px solid #e0e0e0);
	border-radius: var(--gambol-accordion-radius, 4px);
	overflow: hidden;
	transition: box-shadow 0.2s ease;

	&:hover {
		box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
	}
}

// =============================================
// ACCORDION HEADER
// =============================================

.gambol-accordion-item__header {
	display: flex;
	align-items: center;
	width: 100%;
	padding: var(--gambol-accordion-header-padding, 16px 20px);
	font-size: var(--gambol-accordion-header-font-size, 16px);
	font-weight: var(--gambol-accordion-header-font-weight, 600);
	color: var(--gambol-accordion-header-color, #333);
	background: var(--gambol-accordion-header-bg, #f5f5f5);
	border: none;
	cursor: pointer;
	text-align: left;
	transition: background-color 0.2s ease;

	&:hover,
	.gambol-accordion-item.is-open & {
		background: var(--gambol-accordion-header-active-bg, #e8e8e8);
	}

	&:focus-visible {
		outline: 2px solid #00d4aa;
		outline-offset: -2px;
	}
}

.gambol-accordion-item__title {
	flex: 1;
}

.gambol-accordion-item__icon {
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--gambol-accordion-icon-color, #666);
	transition: transform var(--gambol-accordion-duration, 300ms) ease;

	svg {
		display: block;
		width: 20px;
		height: 20px;
	}

	// Plus/minus icon handling
	.gambol-accordion-icon-plus,
	.gambol-accordion-icon-minus {
		display: none;
	}

	.gambol-accordion-icon-plus {
		display: block;
	}

	.gambol-accordion-item.is-open & .gambol-accordion-icon-plus {
		display: none;
	}

	.gambol-accordion-item.is-open & .gambol-accordion-icon-minus {
		display: block;
	}
}

// Icon position modifiers
.gambol-accordion--icon-left {
	.gambol-accordion-item__header {
		gap: 12px;
	}

	.gambol-accordion-item__icon {
		order: -1;
	}
}

.gambol-accordion--icon-right {
	.gambol-accordion-item__header {
		gap: 12px;
	}
}

// Icon rotation for chevron/arrow
.gambol-accordion--icon-chevron,
.gambol-accordion--icon-arrow {
	.gambol-accordion-item.is-open .gambol-accordion-item__icon svg {
		transform: rotate(180deg);
	}
}

.gambol-accordion--icon-arrow {
	.gambol-accordion-item.is-open .gambol-accordion-item__icon svg {
		transform: rotate(90deg);
	}
}

// =============================================
// ACCORDION BODY
// =============================================

.gambol-accordion-item__body {
	display: grid;
	grid-template-rows: 0fr;
	transition: grid-template-rows var(--gambol-accordion-duration, 300ms) ease;

	.gambol-accordion-item.is-open & {
		grid-template-rows: 1fr;
	}

	&[hidden] {
		display: grid;
	}
}

.gambol-accordion-item__content {
	overflow: hidden;
	padding: 0;
	background: var(--gambol-accordion-content-bg, #fff);
	transition: padding var(--gambol-accordion-duration, 300ms) ease;

	.gambol-accordion-item.is-open & {
		padding: var(--gambol-accordion-content-padding, 20px);
	}
}

// =============================================
// EDITOR STYLES
// =============================================

.gambol-accordion-editor {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.gambol-accordion-editor-item {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 12px;
	background: rgba(255, 255, 255, 0.05);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 4px;
}

.gambol-accordion-title {
	flex: 1;
	font-size: 13px;
	color: rgba(255, 255, 255, 0.9);
	cursor: pointer;

	&:hover {
		color: #00d4aa;
	}
}

.gambol-accordion-title-input {
	flex: 1;
	padding: 4px 8px;
	font-size: 13px;
	color: #fff;
	background: rgba(0, 0, 0, 0.3);
	border: 1px solid #00d4aa;
	border-radius: 3px;
	outline: none;
}

.gambol-accordion-actions {
	display: flex;
	gap: 4px;

	button {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 24px;
		height: 24px;
		font-size: 14px;
		color: rgba(255, 255, 255, 0.5);
		background: transparent;
		border: none;
		border-radius: 3px;
		cursor: pointer;
		transition: all 0.15s ease;

		&:hover:not(:disabled) {
			color: #fff;
			background: rgba(255, 255, 255, 0.1);
		}

		&:disabled {
			opacity: 0.3;
			cursor: not-allowed;
		}

		&.gambol-accordion-remove:hover:not(:disabled) {
			color: #ff6b6b;
			background: rgba(255, 107, 107, 0.1);
		}
	}
}

// =============================================
// FRONTEND JS INTEGRATION
// =============================================

// JavaScript will toggle the 'is-open' class and update aria-expanded
// This CSS handles the visual state changes
